<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manajemen Produk - Flowers Shop</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="css/admin.css" />
    <link rel="stylesheet" href="css/tabel.css" />
  </head>
  <body data-page="produk">
    <div class="admin-wrapper">
      <!-- Sidebar akan dimuat secara dinamis di sini -->
      <div id="sidebar-container"></div>

      <div class="main-content">
        <header class="header">
          <h1>Manajemen Produk</h1>

          <div class="header-actions">
            <div class="notification-icon">
              <i class="bi bi-bell fs-4"></i>
              <span class="notification-badge">3</span>
            </div>

            <div class="admin-profile">
              <img src="img/admin-avatar.jpg" alt="Admin" />
              <span id="nama-admin">Admin</span>
            </div>
          </div>
        </header>

        <!-- Tabel Produk -->
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Daftar Produk</h2>
            <div class="table-actions">
              <div class="search-box">
                <input
                  type="text"
                  id="searchProduct"
                  placeholder="Cari produk..."
                />
                <button><i class="bi bi-search"></i></button>
              </div>
              <button
                class="btn btn-primary"
                id="btnAddProduct"
                data-bs-toggle="modal"
                data-bs-target="#addProductModal"
              >
                <i class="bi bi-plus-lg"></i> Tambah Produk
              </button>
            </div>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th class="col-id">ID</th>
                  <th class="col-image">Gambar</th>
                  <th class="col-name">Nama Produk</th>
                  <th class="col-category">Kategori</th>
                  <th class="col-price">Harga</th>
                  <th class="col-stock">Stok</th>
                  <th class="col-status">Status</th>
                  <th class="col-action">Aksi</th>
                </tr>
              </thead>
              <tbody id="productTableBody">
                <!-- Data produk akan dimuat oleh JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Tambah Produk -->
    <div
      class="modal fade"
      id="addProductModal"
      tabindex="-1"
      aria-labelledby="addProductModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addProductModalLabel">
              Tambah Produk Baru
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addProductForm">
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="productName" class="form-label"
                      >Nama Produk</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="productName"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="productCategory" class="form-label"
                      >Kategori</label
                    >
                    <select class="form-select" id="productCategory" required>
                      <option value="">Pilih kategori</option>
                      <option value="bunga_potong">Bunga Potong</option>
                      <option value="bunga_pot">Bunga Pot</option>
                      <option value="pot_gantung">Pot Gantung</option>
                      <option value="pot_rotan">Pot Rotan</option>
                      <option value="pot_biasa">Pot Biasa</option>
                      <option value="pot_kaki_besi">Pot Kaki Besi</option>
                      <option value="aksesoris">Aksesoris</option>
                      <option value="pot_kayu">Pot Kayu</option>
                      <option value="pot_keramik">Pot Keramik</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="productPrice" class="form-label"
                      >Harga (Rp)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="productPrice"
                      min="0"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="productStock" class="form-label">Stok</label>
                    <input
                      type="number"
                      class="form-control"
                      id="productStock"
                      min="0"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="productDescription" class="form-label"
                  >Deskripsi Produk</label
                >
                <textarea
                  class="form-control"
                  id="productDescription"
                  rows="3"
                ></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Gambar Produk</label>
                <div class="image-upload" id="productImageUpload">
                  <i class="bi bi-cloud-upload"></i>
                  <p>Klik atau seret file untuk upload</p>
                  <small>PNG, JPG, atau JPEG (Maks. 2MB)</small>
                </div>
                <input
                  type="file"
                  id="productImage"
                  accept="image/*"
                  style="display: none"
                />
              </div>

              <div class="mb-3">
                <label for="productStatus" class="form-label">Status</label>
                <select class="form-select" id="productStatus">
                  <option value="active" selected>Aktif</option>
                  <option value="inactive">Nonaktif</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Batal
            </button>
            <button type="button" class="btn btn-primary" id="saveProductBtn">
              Simpan Produk
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Edit Produk -->
    <div
      class="modal fade"
      id="editProductModal"
      tabindex="-1"
      aria-labelledby="editProductModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editProductModalLabel">Edit Produk</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editProductForm">
              <input type="hidden" id="editProductId" />

              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editProductName" class="form-label"
                      >Nama Produk</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editProductName"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editProductCategory" class="form-label"
                      >Kategori</label
                    >
                    <select
                      class="form-select"
                      id="editProductCategory"
                      required
                    >
                      <option value="">Pilih kategori</option>
                      <option value="bunga_potong">Bunga Potong</option>
                      <option value="bunga_pot">Bunga Pot</option>
                      <option value="pot_gantung">Pot Gantung</option>
                      <option value="pot_rotan">Pot Rotan</option>
                      <option value="pot_biasa">Pot Biasa</option>
                      <option value="pot_kaki_besi">Pot Kaki Besi</option>
                      <option value="aksesoris">Aksesoris</option>
                      <option value="pot_kayu">Pot Kayu</option>
                      <option value="pot_keramik">Pot Keramik</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editProductPrice" class="form-label"
                      >Harga (Rp)</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editProductPrice"
                      min="0"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editProductStock" class="form-label"
                      >Stok</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="editProductStock"
                      min="0"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="editProductDescription" class="form-label"
                  >Deskripsi Produk</label
                >
                <textarea
                  class="form-control"
                  id="editProductDescription"
                  rows="3"
                ></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Gambar Produk</label>
                <div class="row align-items-center">
                  <div class="col-md-4">
                    <img
                      src="img/placeholder.jpg"
                      id="editProductPreview"
                      class="img-fluid rounded"
                      alt="Preview"
                    />
                  </div>
                  <div class="col-md-8">
                    <div class="image-upload" id="editProductImageUpload">
                      <i class="bi bi-cloud-upload"></i>
                      <p>Klik untuk ganti gambar</p>
                      <small>PNG, JPG, atau JPEG (Maks. 2MB)</small>
                    </div>
                    <input
                      type="file"
                      id="editProductImage"
                      accept="image/*"
                      style="display: none"
                    />
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="editProductStatus" class="form-label">Status</label>
                <select class="form-select" id="editProductStatus">
                  <option value="active">Aktif</option>
                  <option value="inactive">Nonaktif</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Batal
            </button>
            <button type="button" class="btn btn-primary" id="updateProductBtn">
              Simpan Perubahan
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Konfirmasi Hapus -->
    <div
      class="modal fade"
      id="deleteConfirmModal"
      tabindex="-1"
      aria-labelledby="deleteConfirmModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteConfirmModalLabel">
              Konfirmasi Hapus
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              Apakah Anda yakin ingin menghapus produk
              <span id="deleteProductName" class="fw-bold"></span>?
            </p>
            <p class="text-danger">Tindakan ini tidak dapat dibatalkan.</p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Batal
            </button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
              Hapus Produk
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/bantuan.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/produk.js"></script>
  </body>
</html>
